enum StageType {
  PRE_TEST
  POST_TEST
  INTERACTIVE
}

enum QuestionType {
  MCQ
  TRUE_FALSE
  DRAG_DROP
  ESSAY
}

model Question {
  id           String       @id @default(cuid())
  storyId      String
  stageType    StageType
  questionType QuestionType
  questionText String
  xpValue      Int          @default(0)
  metadata     Json?

  story             Story                @relation(fields: [storyId], references: [id], onDelete: Cascade)
  answerOptions     AnswerOption[]
  interactiveSlides InteractiveSlide[]
  attemptLogs       QuestionAttemptLog[]

  @@index([storyId])
  @@map("questions")
}

model AnswerOption {
  id         String  @id @default(cuid())
  questionId String
  optionText String
  isCorrect  Boolean @default(false)

  question Question @relation(fields: [questionId], references: [id], onDelete: Cascade)

  @@index([questionId])
  @@map("answer_option")
}
